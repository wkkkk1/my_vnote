# 家里自己学习
2024.11.7
下载qemu9.10的安装，放在了usr/local
下载了关于xv6 risc-V的源码
下载了xv6 的编译工具，
./configure --prefix=/opt/riscv
make

使用这个方式给安装了一下。
```
  460  cd riscv-gnu-toolchain
  461  sudo ./configure --prefix=/opt/riscv\n 
  462  sudo make -j 19

```
这玩意很慢，不知道为啥网络这么不行

反正安装成功了，

## 11.14
很无语，本来想学习一下子的，突然发现manjaro下不能听歌，不知道啥原因。

## 11.21

遇到的问题
比如
:: 正在同步软件包数据库...
### 错误：未能同步所有数据库（软件仓库没有配置服务器信息
 sudo  pacman-mirrors -i -c China -m rank
直接换源就行，

## 把zephyr能够在qemu上运行

浅层克隆，因为太卡，老断。  相当于git log只有一层最近的。

```
git clone https://github.geekery.cn/https://github.com/zephyrproject-rtos/zephyr.git -depth 1

west init -l zephyr       #指定路径

west -v update   #更新

sudo pacman -S dtc #安装dtc

west zephyr-export #要不然cmake用不了，但还是用不了，因为缺少sdk

使用wget或者west，太慢啦，那么多个小时。实在不行还是usb拿过来吧

之前下载的sdk不完整，从u盘拿到后，重新弄一下，ok
成功了在opd的sdk的qemu 跑hello

```

west update实在是慢吞吞。继续使用代理：
这个东西不过就是在后边给加速，因此可以在west.yaml更改url  

```

manifest:
  defaults:
    remote: upstream

  remotes:
    - name: upstream
      url-base: https://github.geekery.cn/https://github.com/zephyrproject-rtos
    - name: babblesim
      url-base: https://github.geekery.cn/https://github.com/BabbleSim

  group-filter: [-babblesim, -optional]

```

速度快了十倍，我真是天才。

此外，再增加关于这个git的并行下载：
设置10个
git config --global fetch.parallel 10
查看
git config --get fetch.parallel

这玩意确实得几mb每秒，才能勉强接受。

下一下关于

## 弄一下yocto这种的docker镜像


 sudo pacman -S docker
 还需要再设置
 
按道理，是已经搜索到了。


 systemctl enable docker 
sudo docker info 



```bash
#这个是lite版本
#在pc生成补丁
sudo /home/wkkkk/work_1/linux64/hdiffi  V04.0.00.202401151506_OTA_ANDES.tar V04.0.00.202401191234_OTA_ANDES.tar  buding_test_lite 
old : "V04.0.00.202401151506_OTA_ANDES.tar"
new : "V04.0.00.202401191234_OTA_ANDES.tar"
out : "buding_test_lite"
hdiffi run with compress plugin: ""
oldDataSize : 257167616
newDataSize : 257167616
diffDataSize: 247474090
hdiffi  time: 152.689 s
  out diff file ok!

load diffFile for test by patch:
diffDataSize: 247474090
hpatchi run with decompresser: ""
  requirements memory size: (must) 0 + (cache) 40960
hpatchi time: 0.126 s
  patch check diff data ok!

all   time: 152.818 s

#板子上使用补丁
./arm_hpatchz V04.0.00.202401151506_OTA_ANDES.tar buding_test_lite new2.tar
old : "V04.0.00.202401151506_OTA_ANDES.tar"
diff: "buding_test_lite"
out : "new2.tar"
oldDataSize : 257167616
diffDataSize: 247474090
newDataSize : 257167616
hpatchi run with decompresser: ""
  requirements memory size: (must) 0 + (cache) 40960
  patch ok!

hpatchi time: 4.543 s

#核对pc上的文件与使用补丁生成的文件的md5哈希值 ，结论是一致
md5sum V04.0.00.202401191234_OTA_ANDES.tar                                                    ✔ 
074b3d06d964b0c4c8ac9bd2b4bc7d3f  V04.0.00.202401191234_OTA_ANDES.tar

md5sum new2.tar 
074b3d06d964b0c4c8ac9bd2b4bc7d3f  new2.tar


```

以前是被我弄成功啦。

# 2025.06.04
再给电脑更新一下，后续得慢慢用起来家里的电脑了。

基本的东西都还好，就是费一点流量罢了。

接下来要干啥来着？

在家尝试几个开源的项目，zephyr，争取自己能提交一个东西，而不是每次光听不做。
更新比较麻烦，就暂时不更新吧。看看能做什么操作？

发现自己的git pull不够新，直接pull给报错


报这个url找不到
 'https://github.geekery.cn/https://github.com/zephyrproject-rtos/zephyr.git/ 

wangkun1999

 git remote set-url origin https://github.geekery.cn/git@github.com:zephyrproject-rtos/zephyr.git
    ~/z/zephyr    main ⇣10726⇡1  git pull --rebase 
 这玩意不能直接代理.git了，有变化。
 然后是我自己提交了，外部仓库也提交了，这个时候应该去使用变基。
 

# 2025.06.08
今天是坚持用manjaro做开发的第二晚。


## 解决硬盘挂载失败，自己手动挂载 的问题。

sudo mount -t ntfs-3g /dev/sdb2  /mnt/my_upan

然后复制硬盘里边的相关文件，把开发环境给搭建一下。
## GD开发板
GD32VW553-IOT
样板，先看看有没有资料。

官网有资料，

GD32VW55x 系列器件是基于 Nuclei N307 处理器的 32 位通用微控制器， 其中 N307 处理器是基于 RSIC-V 架构指令集开发而来，以下简称 RISC-V 处理器。

看看，zephyr支持吗

首先，我在zephyr支持的硬件里，发现了这个东西的存在，risc-v型，
gd_gd32 , GD32VF103， GD32VF103这个，可能可以作为参考

在linux上进行开发：
1、开发环境，工具链。
SEGGER Embedded Studio：这是一个跨平台的集成开发环境，支持 Linux 系统。你可以从 SEGGER 官方网站下载并安装适用于 Linux 的版本，并通过其包管理器安装 GD32VW55x 的支持组件

已经下载，激活许可证。安装了支持包。

segger是一家德国的公司，这家公司开发了这个ide，是一个免费非商业 的。

2、固件烧录
使用 GD32 All-In-One Programmer 工具（Linux 版本）可以完成固件的烧录

下载了，怎么用
![](vx_images/42072876302953.png =587x)
烧录；刚好有个usb转db9母口的，2收3发，2rx，3tx
对方那个pa6收，pa7发

家里的串口连好线啦。



可以，使用一个ttl转usb，接rx，tx，gnd三根线，连接到电脑，就能用minicom工具进行使用，跑得系统好像是freertos

弄下环境，看看我 这边的环境。

先弄个串口，确定能用？    ---ok


记得之前可以用啊


拿zephyr编个这个玩意的工程，然后给移植上去就行。


```bash
west boards | grep "gd32*"                          ✔    zephyrproject  
gd32f450v_start
gd32f450z_eval
gd32f470i_eval
gd32e507z_eval
gd32e103v_eval
gd32vf103c_starter
gd32e507v_start
gd32l233r_eval
gd32f450i_eval
gd32a503v_eval
gd32f407v_start
gd32f403z_eval
gd32f350r_eval
gd32vf103v_eval
```

start开发板，就是这个gd32vw553板子的之上的东西。
gd32vf103c_starter

在使用加速的时候，出error了。


麻了，以前的一个还能运行，现在怎么自己新编译的东西还报错。

west build -b qemu_x86 samples/hello_world

这个是以前的 例子，再来一次看看。
发现，west 这个命令没问题，只是这个什么arm的有问题。



```bash
 ~/zephyrproject  west build -b gd32vf103c_starter zephyr/samples/basic/blinky

#可以生成这个blinky程序，接着是烧录的事情
```


对于烧录，zephyr的烧录有点麻烦，我要不然直接用那个工具进行烧录看看，

 ./GD32_ISP_CLI -c --pn 3 --br 115200 --db 8 --pr NONE --sb 1 --to 15000 -i GD32F425RET -p --dwp -d --a 8000000 --fn /home/wkkkk/zephyrproject/build/zephyr/zephyr.elf
Establish connection to the COM port 

Opening port     [Failed]

Cannot open the com port,the port may be used by another application


报错---解决，果然是模块不匹配的问题，否则我也找不到原因啦。




# 2025.06.09
6.9白天，gd32这玩意已经是可以烧录，但是没有可以使用的程序，我那边烧的东西有问题。

```bash
cmake -Bbuild_pico2 -GNinja -DBOARD=rpi_pico2/rp2350a/m33 -DCMAKE_BUILD_TYPE=Debug zephyr/samples/basic/blinky


```








# 家里zephyr的改动
```bash
diff --git a/west.yml b/west.yml
index 20f349703..9bf061f69 100644
--- a/west.yml
+++ b/west.yml
@@ -20,9 +20,9 @@ manifest:
 
   remotes:
     - name: upstream
-      url-base: https://github.geekery.cn/https://github.com/zephyrproject-rtos
+      url-base: https://github.com/zephyrproject-rtos
     - name: babblesim
-      url-base: https://github.geekery.cn/https://github.com/BabbleSim
+      url-base: https://github.com/BabbleSim
 
   group-filter: [-babblesim, -optional]
```
    - name: upstream
-      url-base: https://github.com/zephyrproject-rtos
+      url-base: https://gitclone.com/github.com/zephyrproject-rtos
     - name: babblesim
-      url-base: https://github.com/BabbleSim
+      url-base: https://gitclone.com/github.com/BabbleSim



git config --global http.proxy http://<proxy_server>:<port>
git config --global https.proxy https://<proxy_server>:<port>

这个新发现的这玩意，也能进行加速。


## 比较好用的代理
remotes:
     - name: upstream
-      url-base: https://github.com/zephyrproject-rtos
+      url-base: https://github.moeyy.xyz/https://github.com/zephyrproject-rtos
     - name: babblesim
-      url-base: https://github.com/BabbleSim
+      url-base: https://github.moeyy.xyz/https://github.com/BabbleSim
 
































